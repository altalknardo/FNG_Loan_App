# Contribution Withdrawal Request System - Complete Guide

## Overview
The FNG app now includes a comprehensive **contribution withdrawal request system** that allows customers to request withdrawals from their saved contribution balance, with admin approval workflow.

---

## ğŸ¯ Key Features

### For Customers:
âœ… **Request Withdrawals** - Submit withdrawal requests anytime  
âœ… **Multiple Accounts** - Choose which account receives funds  
âœ… **Track Status** - Monitor request status (pending/approved/rejected)  
âœ… **Reason Required** - Provide context for withdrawal  
âœ… **Balance Protection** - Cannot withdraw more than available  
âœ… **Quick Amounts** - Fast selection of common amounts  

### For Admins:
âœ… **Review Requests** - See all withdrawal requests in one place  
âœ… **Approve/Reject** - Quick approval or rejection with one click  
âœ… **View Details** - Complete customer and account information  
âœ… **Balance Tracking** - Automatic balance updates on approval  
âœ… **Transaction History** - All actions logged  

---

## ğŸ“± Customer Experience

### Accessing the Withdrawal Feature

The withdrawal button appears prominently on the **Contributions** page when the customer has a balance > â‚¦0.

#### Location:
```
Contributions Tab â†’ Top of page (after stats cards)
```

#### Visual:
- **Green gradient card** showing available balance
- **Large withdrawal amount** in green text
- **"Request Withdrawal" button** in green
- **Info text** explaining approval process

### Step-by-Step: Requesting a Withdrawal

#### Step 1: Click "Request Withdrawal"
Opens a comprehensive dialog with all withdrawal options.

#### Step 2: View Available Balance
The dialog displays your current contribution balance prominently at the top.

#### Step 3: Enter Withdrawal Amount
```
Options:
- Manual input (â‚¦500 minimum)
- Quick select buttons (â‚¦5k, â‚¦10k, All)
- Maximum: Your available balance
```

#### Step 4: Select Withdrawal Account
Choose from your saved payment methods:
- Bank accounts
- Debit/credit cards
- Shows: Bank name, last 4 digits
- Must have at least one payment method

#### Step 5: Provide Reason
Explain why you need the withdrawal:
- Required field
- Max 200 characters
- Examples:
  - "Medical emergency"
  - "School fees payment"
  - "Business capital"
  - "Personal needs"

#### Step 6: Review Summary
The dialog shows:
- Withdrawal amount
- Remaining balance after withdrawal
- Selected account
- Reason provided

#### Step 7: Submit Request
Click **"Submit Request"** button:
- Request sent to admin
- Status: Pending
- Notification shown
- Added to transaction history

---

## ğŸ¨ User Interface

### Withdrawal Button Card
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Available Balance                  â”‚
â”‚  â‚¦25,000.00                    â¬‡ï¸   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ğŸ”½ Request Withdrawal        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”‚  Withdraw your savings anytime.     â”‚
â”‚  Subject to admin approval.         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Withdrawal Dialog
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Request Withdrawal              âœ•  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Available Balance                  â”‚
â”‚  â‚¦25,000.00                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âš ï¸ Important:                      â”‚
â”‚  â€¢ Requires admin approval          â”‚
â”‚  â€¢ Takes 1-2 business days          â”‚
â”‚  â€¢ Sent to selected account         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Withdrawal Amount                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â‚¦ 10000                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  Maximum: â‚¦25,000.00                â”‚
â”‚                                     â”‚
â”‚  Quick Select                       â”‚
â”‚  [ â‚¦5k ]  [ â‚¦10k ]  [ All ]         â”‚
â”‚                                     â”‚
â”‚  Withdrawal Account                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ¦ GTBank â€¢â€¢â€¢â€¢ 4532          â–¼â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”‚  Reason for Withdrawal              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Need funds for school fees... â”‚ â”‚
â”‚  â”‚                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  45/200 characters                  â”‚
â”‚                                     â”‚
â”‚  ğŸ’¼ Withdrawal Summary              â”‚
â”‚  Withdrawal Amount: â‚¦10,000.00      â”‚
â”‚  Remaining Balance: â‚¦15,000.00      â”‚
â”‚                                     â”‚
â”‚  [ Cancel ]  [ Submit Request ]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ‘¨â€ğŸ’¼ Admin Experience

### Accessing Withdrawal Approvals

Navigate to: **Admin Mode** â†’ **Withdrawals** (sidebar)

### Admin Dashboard View

#### Stats Cards (Top)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â° Pending  â”‚ âœ“ Approved  â”‚ âœ— Rejected  â”‚
â”‚     3       â”‚      15     â”‚      2      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Tabs
- **Pending** - Requests awaiting approval
- **Approved** - Successfully approved withdrawals
- **Rejected** - Denied withdrawal requests

### Request Card Details

Each withdrawal request shows:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¤ John Doe                    [Pending]   â”‚
â”‚     john@example.com                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Withdrawal Amount    Available Balance     â”‚
â”‚  -â‚¦10,000.00         â‚¦25,000.00            â”‚
â”‚                                             â”‚
â”‚  Bank Account                               â”‚
â”‚  GTBank â€¢â€¢â€¢â€¢ 4532                          â”‚
â”‚                                             â”‚
â”‚  Request Date         Remaining Balance     â”‚
â”‚  2025-10-19 2:30 PM   â‚¦15,000.00           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“„ Reason:                                 â”‚
â”‚  Need funds for school fees payment this    â”‚
â”‚  week. Urgent requirement.                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Payment Method Details                     â”‚
â”‚  Type: bank                                 â”‚
â”‚  Account Name: Savings Account              â”‚
â”‚  Bank: GTBank                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ âœ“ Approve ]      [ âœ— Reject ]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Admin Actions

#### Approve Withdrawal
1. Click **"Approve"** button
2. System automatically:
   - Updates request status to "approved"
   - Deducts amount from customer's contribution balance
   - Updates transaction history
   - Shows success notification
3. Customer sees approved status in their transactions

#### Reject Withdrawal
1. Click **"Reject"** button
2. System automatically:
   - Updates request status to "rejected"
   - Keeps customer balance unchanged
   - Updates transaction history to "failed"
   - Shows notification
3. Customer sees rejected status

---

## ğŸ’¾ Data Storage & Management

### LocalStorage Keys

#### Withdrawal Requests
```javascript
Key: "withdrawalRequests"
Type: Array
Structure: [
  {
    id: number,
    userId: string,
    userName: string,
    amount: number,
    accountDetails: string,
    requestDate: string,
    requestTime: string,
    status: "pending" | "approved" | "rejected",
    availableBalance: number,
    reason: string,
    paymentMethod: {
      type: string,
      name: string,
      last4: string,
      bankName?: string,
      cardBrand?: string
    }
  }
]
```

#### Contribution Balance
```javascript
Key: "contributionBalance"
Type: String (number)
Updated: On approval/contributions
```

#### Transactions
```javascript
Key: "transactions"
Type: Array
Includes: withdrawal_request, withdrawal (approved), failed (rejected)
```

---

## ğŸ”„ Workflow Diagram

```
Customer Side:
1. View Balance â†’ 2. Click Withdraw â†’ 3. Fill Form â†’ 4. Submit
                                                         â†“
Admin Side:                                              â†“
5. Review Request â† â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€
         â†“
    6. Decision
         â†“
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â†“         â†“
Approve    Reject
    â†“         â†“
7. Deduct  7. Keep
Balance    Balance
    â†“         â†“
8. Update  8. Update
Transaction Transaction
    â†“         â†“
9. Notify  9. Notify
Customer   Customer
```

---

## âœ… Validation Rules

### Customer Side:
- âŒ Amount must be > â‚¦0
- âŒ Amount cannot exceed available balance
- âŒ Must select a payment account
- âŒ Reason is required (min 1 character)
- âŒ Must have at least one payment method added
- âœ… Can request multiple withdrawals (if balance allows)

### Admin Side:
- âœ… Can approve any pending request
- âœ… Can reject any pending request
- âš ï¸ Cannot approve if would result in negative balance
- âœ… Approved/rejected requests cannot be changed

---

## ğŸ“Š Transaction History Integration

### Customer View
Withdrawal requests appear in **Transaction History** as:

#### Pending:
```
Type: Withdrawal Request
Status: Pending
Amount: -â‚¦10,000.00
Date: 2025-10-19
Description: Withdrawal Request - School fees
Icon: â° (Clock)
Color: Orange
```

#### Approved:
```
Type: Withdrawal
Status: Completed
Amount: -â‚¦10,000.00
Date: 2025-10-19
Description: School fees
Icon: âœ“ (Check)
Color: Green
```

#### Rejected:
```
Type: Withdrawal Request
Status: Failed
Amount: -â‚¦10,000.00
Date: 2025-10-19
Description: Withdrawal Request - School fees
Icon: âœ— (X)
Color: Red
```

---

## ğŸ¯ Use Cases

### Use Case 1: Emergency Withdrawal
**Scenario:** Customer needs funds urgently

1. Customer has â‚¦50,000 saved
2. Needs â‚¦20,000 for medical emergency
3. Opens Contributions â†’ Request Withdrawal
4. Enters â‚¦20,000
5. Selects bank account
6. Reason: "Medical emergency - hospital bill"
7. Submits request
8. Admin reviews within hours
9. Approves request
10. Customer receives funds in 1-2 business days

### Use Case 2: Partial Withdrawal
**Scenario:** Customer wants some savings but not all

1. Balance: â‚¦100,000
2. Requests: â‚¦30,000
3. Reason: "Business capital"
4. Remaining: â‚¦70,000 still saved
5. Can continue making contributions
6. Can request another withdrawal later

### Use Case 3: Full Withdrawal
**Scenario:** Customer wants to withdraw all savings

1. Balance: â‚¦25,000
2. Clicks "All" quick button
3. Requests: â‚¦25,000
4. Reason: "Closing account"
5. Remaining: â‚¦0
6. Can still make new contributions later

---

## ğŸ” Security Features

### Data Protection:
- âœ… No sensitive data exposed in UI
- âœ… Only last 4 digits of account shown
- âœ… Amount validation prevents errors
- âœ… Balance checks prevent overdraft
- âœ… Admin approval prevents abuse

### Access Control:
- âœ… Customers can only see own requests
- âœ… Admins see all requests
- âœ… Cannot modify approved/rejected requests
- âœ… Audit trail in transaction history

---

## ğŸ“± Mobile Optimization

### Responsive Design:
- âœ… Full-screen dialog on mobile
- âœ… Large touch targets (buttons)
- âœ… Scrollable content
- âœ… Auto-focus on amount input
- âœ… Quick amount buttons optimized for touch

### Performance:
- âœ… Instant validation feedback
- âœ… No page reloads required
- âœ… Real-time balance updates
- âœ… Optimistic UI updates

---

## ğŸš€ Future Enhancements

### Planned Features:
- [ ] Withdrawal limits (daily/monthly)
- [ ] Scheduled withdrawals
- [ ] Recurring withdrawal requests
- [ ] Email notifications for status changes
- [ ] SMS confirmation codes
- [ ] Withdrawal history export
- [ ] Admin bulk approval
- [ ] Withdrawal analytics dashboard
- [ ] Auto-rejection after X days
- [ ] Customer withdrawal comments/appeals

---

## ğŸ› Troubleshooting

### Issue: "Insufficient Balance" Error
**Solution:** Check your contribution balance. You may have pending loan payments or previous withdrawals.

### Issue: "Please add a payment method first"
**Solution:** Go to Profile â†’ Payment Methods â†’ Add a bank account or card.

### Issue: Withdrawal button not showing
**Solution:** Make sure your contribution balance is > â‚¦0. Make some contributions first.

### Issue: Request stuck in "Pending"
**Solution:** Contact admin. Approval typically takes 1-2 business days.

### Issue: Cannot select account in dropdown
**Solution:** Ensure you have added at least one payment method in your profile.

---

## ğŸ“ Support Information

### For Customers:
- Check transaction history for request status
- Contact admin if pending > 2 business days
- Ensure payment method is valid before requesting
- Save transaction reference numbers

### For Admins:
- Review each request carefully
- Check customer balance before approving
- Contact customer if reason is unclear
- Keep audit trail of all actions

---

## ğŸ“ˆ Statistics & Reporting

### Admin Dashboard Metrics:
- **Pending Count**: Real-time counter
- **Approved Count**: Lifetime approved
- **Rejected Count**: Lifetime rejected
- **Total Withdrawal Volume**: Sum of approved amounts
- **Average Withdrawal**: Mean approved amount
- **Response Time**: Time from request to decision

---

## ğŸ“ Best Practices

### For Customers:
1. **Be specific** in withdrawal reasons
2. **Request realistic amounts** based on balance
3. **Keep payment methods updated**
4. **Plan ahead** - allow 2 business days
5. **Check transaction history** for status updates

### For Admins:
1. **Review requests daily**
2. **Verify customer balance** before approval
3. **Read withdrawal reasons** carefully
4. **Document large withdrawals**
5. **Respond within 24-48 hours**
6. **Contact customers** for unclear requests

---

## ğŸ“ Summary

The **Contribution Withdrawal Request System** provides:

âœ… **Easy Access** - Prominent button on Contributions page  
âœ… **Complete Information** - All details in one dialog  
âœ… **Smart Validation** - Prevents errors before submission  
âœ… **Quick Selection** - Fast amount and account selection  
âœ… **Admin Control** - Full review and approval workflow  
âœ… **Transaction Tracking** - Complete audit trail  
âœ… **Balance Protection** - Automatic balance management  
âœ… **Mobile Optimized** - Perfect for on-the-go requests  

**Customers can now access their savings easily while maintaining financial oversight through the admin approval process.**

---

## ğŸ”— Related Features

- **Contributions** - Make daily savings contributions
- **Payment Methods** - Manage bank accounts and cards
- **Transaction History** - View all financial activities
- **Admin Approvals** - KYC, loans, and withdrawal management
- **Dashboard** - Overview of all balances and activities

---

**Version:** 1.0  
**Last Updated:** October 19, 2025  
**Status:** âœ… Fully Implemented
